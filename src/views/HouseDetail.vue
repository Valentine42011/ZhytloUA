<script setup>
import { useRoute, useRouter } from 'vue-router';
import Button from '@/components/ui/button/Button.vue';
import { listings } from '@/data/listings.js';

const router = useRouter();
const route = useRoute();

function goToPage(path) {
    router.push(path).catch(err => {
        console.error('Router push error:', err);
    });
}

const id = parseInt(route.params.id);
const listing = listings.find(item => item.id === id);
</script>

<template>
    <div class="p-6 max-w-3xl mx-auto">
        <div v-if="listing">
            <img :src="listing.image" alt="–§–æ—Ç–æ" class="w-full h-[400px] object-cover rounded mb-6"/>
            <h1 class="text-3xl font-bold">{{ listing.title }}</h1>
            <p class="text-lg">–ú—ñ—Å—Ç–æ: {{ listing.city }}</p>
            <p class="text-lg">–¶—ñ–Ω–∞: {{ listing.price }} –≥—Ä–Ω</p>
            <p class="text-lg">–¢–∏–ø: {{ listing.type }}</p>

            <p class="text-lg mt-[20px] font-bold">–û–ø–∏—Å:</p>
            <p class="text-lg">{{ listing.desc }}</p>

            <p class="text-lg mt-[20px] font-bold">–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –≤–ª–∞—Å–Ω–∏–∫–∞(—Ü—ñ):</p>
            <p class="text-lg">–Ü–º'—è: {{ listing.ownerName }}</p>
            <p class="text-lg">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É: {{ listing.ownerPhone }}</p>
            <p class="text-lg">Email: {{ listing.ownerEmail }}</p>
            <Button @click="goToPage('/')" class="mt-[20px] bg-blue-600 hover:bg-blue-800">
            –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –Ω–∞–∑–∞–¥</Button>
        </div>
        <div v-else>
            <p class="font-bold">–£–ø—Å! –°—Ö–æ–∂–µ —â–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫ üòî</p>
            <p>–û–≥–æ–ª–æ—à–µ–Ω–Ω—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</p>
            <Button @click="goToPage('/')" class="mt-[20px] bg-blue-600 hover:bg-blue-800">
            –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –Ω–∞–∑–∞–¥</Button>
        </div>
    </div>
</template>
